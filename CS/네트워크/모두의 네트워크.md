# 모두의 네트워크 책을 읽고 정리한 내용을 적는 곳입니다.
## 하루 한 챕터, 10일 동안 읽을 것입니다.
---

### Day 1. 네트워크 첫걸음
네트워크에 데이터를 전송하기 위해 **패킷** 이라는 박스에 데이터를 잘게 잘라 넣어 보냅니다. <br />
대역폭 : 네트워크에서 이용 가능한 최대 전송 속도로 전송 가능한 단위 시간당 전송량

그리고 패킷을 보낼때는 번호를 붙여서 보냅니다. 순서 없이 보내버리기 때문에, 후에 조립할 때 번호가 필요합니다.

정보를 표기하는 최소 단위, 비트 라고합니다. <br />
그리고, 8비트 = 1바이트 입니다.

||LAN|WAN|
|---|---|---|
|범위|좁다(건물 / 특정 지역)|넓다(랜과 랜을 연결)|
|속도|빠르다|느리다|
|오류|적다|많다|

WAN 은 ISP(인터넷 서비스 제공자)의 서비스로 연결합니다.

회사 네트워크를 구성할 때, 가정과의 큰 차이점은 DMZ 라는 네트워크 영역이 존재한다는 부분입니다.

DMZ 는 외부 공개를 위한 네트워크로, 주로 서버를 공개합니다.
서버는 주로 웹서버, 메일서버, DNS서버 등이 있습니다. 이는 후술 하겠습니다.

회사 서버를 운용하는 방법은 세 가지가 있습니다.

1. 서버를 사내에 선반(랙)에 두고 운용하는 방법.
2. 데이터 센터
3. 클라우드

그리고 1번과 2번의 방식을 **온프레미스** 방식이라고 합니다.
이는 클라우드와 많이 비교되는 방식입니다.

1. 온프레미스
2. 클라우드

---

### Day 2. 네트워크의 기본 규칙

#### - 프로토콜
통신을 위한 규칙을 **프로토콜** 이라고 부른다.

#### - OSI 모델과 TCP/IP 모델
IOS(국제표준화기구)가 OSI라는 표준 규격을 제정함.
OSI 모델은 7개 계층(레이어)로 구성됨

7계층 : 응용 계층<br />
6계층 : 표현 계층<br />
5계층 : 세션 계층<br />
4계층 : 전송 계층<br />
3계층 : 네트워크 계층<br />
2계층 : 데이터 링크 계층<br />
1계층 : 물리 계층<br />

|계층|이름|설명|
|---|---|---|
|7계층|응용계층 (Application Layer)|이메일, 파일전송, 웹사이트 조회 등 애플리케이션에 대한 서비스를 제공|
|6계층|표현 계층 (Presentation Layer)|문자 코드, 압축, 암호화 등의 데이터를 변환|
|5계층|세션 계층|세션 체결, 통신 방식을 결정|
|4계층|전송 계층(Transport Layer)|신뢰할 수 있는 통신을 구현|
|3계층|네트워크 계층|다른 네트워크와 통신하기 위한 경로 설정 및 논리 주소를 결정|
|2계층|데이터 링크 계층|네트워크 기기 간의 데이터 전송 및 물리 주소를 결정한다.|
|1계층|물리 계층(Physical Layer)|시스템 간의 물리적인 연결과 전기신호를 변환 및 제어한다.|

데이터를 송신하는 측에서는 7계층에서 1계층으로 내려가면서 데이터를 보내고, <br/>
데이터를 수신하는 측에서는 1계층에서 7계층으로 올라가서 데이터를 받게 된다.

TCP/IP 모델은 4계층 모델이고, 현재 쓰이고 있다.

4계층 :응용 계층<br />
3계층 :전송 계층<br />
2계층 :인터넷 계층<br />
1계층 :네트워크 접속 계층<br />

이떄 OSI 모델의 응용 계층, 표현 계층, 세션 계층은 TCP/IP 모델의 응용계층으로 합쳐져 버리고,<br />
네트워크 계층은 인터넷 계층으로 바뀌고,<br />
데이터 링크 계층과 물리 계층은 네트워크 접속 계층으로 합치게 됩니다.

#### - 캡슐화와 역캡슐화

정보를 보낼때 앞에 **헤더**를 붙여서 보내야함. <br />
이 과정을 **캡슐화** 라고 함

그리고 수신할 때 헤더를 하나씩 제거하는 데 이를 **역캡슐화** 라고 함

그리고 데이터 마지막에 붙는 정보는 **트레일러** 라고 함.

---

### Day 3. 물리계층 : 데이터를 전기 신호로 변환하기

#### - 물리 계층의 역할과 랜 카드의 구조

0과 1만으로 이루어진 비트열을 전기 신호로 변환하려면 **물리 계층** 기술이 필요

전기 신호 : 아날로그 신호, 디지털 신호

#### -  케이블의 종류와 구조

전송 매체 : 데이터가 흐르는 물리적인 선로로 유선과 무선으로 나뉨

트위스트 페어 케이블(랜 케이블, 랜선), 광케이블 등이 유선 <br />
라디오파, 마이크로파, 적외선 등이 무선

트위스트 페어 케이블은 UTP 케이블, STP 케이블로 나워짐 <br />
UTP (Unshielded Twist Pair)<br />
STP (Shielded Twist Pair)

UTP 케이블은 실드로 보호되어 있지 않아서 노이즈에 영향을 받기 쉬움, 하지만 가격이 싸서 많이 사용됨

UTP 케이블은 데이터 전송 품질에 따라 분류됨

STP 케이블은 실드로 보호되어 노이즈에 영향을 적게 받지만, 비싸기 때문에 보편적으로 사용하지는 않는다.

노이즈 : 케이블에 전기 신호가 흐를때 발생

랜 케이블의 양쪽 끝에는 RJ-45 라는 커넥터가 있다.

랜 케이블에는 다이렉트 케이블과 크로스 케이블이 있음

#### - 리피터와 허브의 구조

리피터 : 전기신호를 정형하고 증폭하는 기능

허브 : 포트를 여럭개 가지고 있음. 리피터 허브라고도 불림 <br />
전기 신호를 정형하고 증폭하는 기능을 함

허브는 스스로 판단할 수 없어서, 컴퓨터 1에서 송신 받은 데이터를 2,3,4,5 에게도 수신함. > 더미허브라고도 불림

---

### Day 4. 데이터 링크 계층 : 랜에서 데이터 전송하기

#### - 데이터 링크 계층의 역할과 이더넷

데이터 링크 계층 : 네트워크 장비 간에 신호를 주고받는 규칙을 정하는 계층

이더넷 : 랜에서 적용되는 규칙

이더넷은 **허브**와 같은 장비에 연결된 컴퓨터와 데이터를 주고 받을 때 사용함.

데이터를 보낼때 목적지 정보를 추가해서 보내기 때문에, 더미허브가 받은 데이터를 모든 컴퓨터에게 준다고 하더라도 목적이 이외의 컴퓨터는 데이터를 받더라도 무시하게 되어있음 (후에 더 설명)

이때, 허브에 컴퓨터 여러대가 동시에 데이터를 보내면 데이터들이 충돌 할 수 있음. 이걸 막기 위해 **CSMA/CD**가 존재.

    CS : "데이터를 보내려고 하는 컴퓨터가 케이블에 신호가 흐르는지 아닌지 확인한다."
    MA : '케이블에 데이터가 흐르고 있지 않다면, 데이터를 보내라'
    CD : '충볼이 발생하고 있는지 확인한다'

그치만 효율이 좋지 않아 요즘엔 사용 안함.

#### - MAC주소의 구조

랜 카드에는 제조할때부터 새겨지는 고유의 **MAC 주소**가 존재.

48비트 숫자로 존재함, 앞에 24비트는 제조사 번호, 뒤 24비트는 제조사가 붙인 일련번호.
> 00-20-AD-D2-7A-9A

데이터 링크 계층에서는 **이더넷 헤더와 트레일러**를 붙임.

이더넷 헤더는 14바이트로 구성.
- 목적지 MAC 주소 (6바이트)
- 출발지 MAC 주소 (6바이트)
- 유형 (2바이트) (프로토콜 종류를 식별하는 번호)

트레일러는 데이터 뒤에 붙여지는데, 데이터 전송 도중 오류가 발생하는지 확인하기 위한 용도(FCS(Frame Chack Sequence))

이렇게 이더넷 헤더와 트레일러가 추가된 데이터를 **프레임** 이라고 함.

    데이터를 컴퓨터 1에서 컴퓨터 3으로 보내는 과정 정리 (허브로)

    1. 컴퓨터 1은 이더넷 헤더에 컴퓨터 3의 MAC 주소(목적지 MAC 주소)와 자신의 MAC 주소(출발지 MAC 주소) 정보를 넣고 데이터를 전송 
    2. 캡슐화가 끝난 프레임을 물리계층에서 전기 신호로 변환하여 네트워크를 통해 전송 
    3. 허브는 컴퓨터 1이 보낸 데이터를 1번 포트로 수신하고 2~5번 (모든) 포트로 전송함.
    4. 컴퓨터 2,4,5는 목적지 MAC 주소가 자신의 MAC 주소와 다르기 때문에 데이터를 파기
    5. 컴퓨터 3이 데이터를 수신하고, 역캠슐화가 일어남. (물리 계층에서 전기신호로 전송된 데이터를 비트열로 변환하고, 데이터 링크 계층에서 이더넷 헤더와 트레일러를 분리함)

#### - 스위치의 구조

스위치 내부에는 **MAC 주소 테이블(브리지 테이블)**이라는 것이 있는데, 스위치의 포트 번호와 해당 포트에 연결되어 잇는 컴퓨터의 MAC 주소가 등록되는 데이터 베이스이다.

MAC 주소 학습 기능은, 프레임이 들어왔을 때, 해당 프레임에 있는 출발지 MAC 주소가 MAC 주소 테이블에 등록되어 있지 않으면 포트와 함께 MAC 주소를 등록함.

MAC 주소 테이블에 만약 목적지 MAC 주소가 없다면, 플러딩(flooding, 홍수, 모든 컴퓨터에 보내는 사태)이 일어나고, 등록 되어있다면, 해당 목적지에만 데이터를 전송하는 점(MAC 주소 필터링)에서 허브와 큰 차이 존재

#### - 데이터가 케이블에서 충돌하지 않는 구조

전이중 통신 방식 : 데이터 송수신을 동시에 통신하는 방식 (동시에 데이터를 전송해도 충돌이 발생하지 않음)
반이증 통신 방식 : 회선 하나로 송신과 수신을 번갈아서 통신하는 방식 (동시 전송 시 충돌)

허브는 반이중 통신 방식을 사용해야하고, 스위치는 전이중 통신 방식 가능, 그래서 대부분의 업체들은 스위치만 판매함.

충돌 도메인 : 충돌이 발생할 때 그 영향이 미치는 범위

허브의 경우는 접속되어 있는 모든 컴퓨터가 충돌 도메인이 됨
스위치의 경우는 전이중 통신 방식이기에 충돌이 일어나지 않고, 충돌 도메인의 범위도 매우 좁음

#### - 이더넷의 종류와 특징

|규격 이름|통신 속도|케이블|케이블 최대 길이|표준화 연도|
|-|-|-|-|-|
|10BASE5|10Mbps|동축케이블|500m|1982년|
|10BASE2|10Mbps|동축케이블|185m|1988년|
|10BASE-T|100Mbps|UTP케이블(Cat3이상)|100m|1990년|
|100BASE-TX|100Mbps|UTP케이블(Cat5이상)|100m|1995년|
|1000BASE-T|1000Mbps|UTP케이블(Cat5이상)|100m|1999년|
|10GBASE-T|10Gbps|UTP케이블(Cat6a이상)|100m|2006년|

10BASE-T로 설명해봄.

|10|BASE|-T|
|-|-|-|
|통신속도|전송방식|케이블|

앞 숫자 10은 통신 속도로, 10Mbps 를 의미,
BASE는 전송방식으로 BASEBAND를 의미,

하이픈(-)은 케이블 종류와 길이

동축케이블은 최대 길이를 100미터 단위로 표시, -T는 UTP 케이블을 의미

### Day 5. 네트워크 계층 : 목적지에 데이터 전달하기

#### - 네트워크 계층의 역할

데이터 링크 계층에서는 이더넷 규칙을 기반으로 데이터의 전송을 담당. 같은 네트워크에 있는 컴퓨터로는 데이터 전송 가능 하지만 **인터넷이나 다른 네트워크로는 데이터 전송 불가.**

네트워크 간의 통신을 가능하게 하는 것이 **네트워크 계층**의 역할

라우터 : 데이터의 목적지가 정해지면 해당 목적지까지 어떤 경로로 가는게 좋을지 알려줌

IP주소가 있어야 **어떤 네트워크의 어떤 컴퓨터**인지 식별 가능

네트워크 계층에서 **캡슐화**를 할땐 데이터에 **IP 헤더**를 붙인다.<br />
여기에는 '출발지 IP 주소'와 '목적지 IP 주소'가 포함되어 있다.<br />

캡슐화 된 것을 **IP 패킷**이라고 함. (데이터 링크 계층에서는 프레임)

#### - IP 주소의 구조

IP 주소는 인터넷 서비스 제공자(ISP)에게 받을 수 있음<br />
IPv4와 IPv6가 있는데, IPv4는 32비트, IPv6는 128비트로 구성되어 있음<br />
IP 주소는 공인 IP 주소와 사설 IP 주소가 있음<br />

MAC 주소는 48비트 16진수로 표시, IP 주소는 32비트 10진수로 표시<br />
8비트 단위로 **옥텟**이라 부름

#### - IP 주소의 클래스 구조

네트워크 크기는 클래스라는 개념으로 구분<br />
네트워크 ID와 호스트 ID를 조절<br />

A~E클래스로 나뉘나, 일반적으로 A,B,C 클래스로 나눔

A 클래스 : 8비트 네트워크 ID + 24비트 호스트 ID
B 클래스 : 16비트 네트워크 ID + 16비트 호스트 ID
C 클래스 : 24비트 네트워크 ID + 8비트 호스트 ID

#### - 네트워크 주소와 브로드캐스트 주소의 구조

- IP 주소에는* **네트워크 주소**와 **브로드캐스트 주소**가 있는데, 이 두 주소는 특별한 주소로 컴퓨터나 라우터가 자신의 **IP로 사용하면 안됨.**
- **네트워크 주소**는 전체 네트워크에서 작은 네트워크를 식별하는데 사용됨. 호스트 ID가 10진수로 0이면 그 네트워크를 대표하는 주소가 되는 것!
- 192.168.1.1~192.168.1.6의 IP주소를 가진 컴퓨터는 192.168.1.0의 네트워크에 있다고 할 수 있음.
- **브래드캐스트 주소**는 네트워크에 있는 컴퓨터나 장비 모두에게 한번에 데이터를 전송하는데 사용되는 전용 IP 주소

192.168.1.255

#### - 서브넷 구조

서브넷팅 : 네트워크를 분할하는 것 <br />
서브넷 : 분할된 네트워크

- 서브넷팅이 되면 구성이 네트워크 ID + 호스트 ID 에서 네트워크 ID + 서브넷 ID + 호스트 ID 로 변경됨
- 서브넷 마스크는 네트워크 주소와 호스트 주소를 식별하는 값
- 클래스별로 서브넷 마스크는 A 클래스가 255.0.0.0, B 클래스가 255.255.0.0, C클래스가 255.255.255.0 이다.
- 프리픽스 표기법은 서브넷 마스크를 슬래시(/비트)로 나타냄. 255.255.255.0 = /24

#### -라우터의 구조

- 서로 다른 네트워크를 통신하려면 라우터가 필요.
- 라우터는 네트워크를 분할할 수 있음, 하지만 스위치와 허브는 분할할 수 없음.
- 컴퓨터에서 다른 네트워크로 데이터를 전송하려면 기본 게이트웨이를 설정해야함
- 경로 정보가 등록되어 있는 테이블을 라우팅 테이블 이라고 함
- 라우터 간에 라우팅 정보를 서로 교환하기 위한 프로토콜을 라우팅 프로토콜이라고 함

### Day 6. 전송계층 : 신뢰할 수 있는 데이터 전송하기

#### - 전송 계층의 역할

- 전송 계층은 데이터를 제대로 전달하는 역할을 하며, 오류를 점검하는 기능도 함
- 전송 계층은 전송된 데이터의 목적지가 어떤 애플리케이션인지 확인한다. (ex. 웹 브라우저, 메일 프로그램 ~~)
- **연결형 통신**은 신뢰할 수 있고 정확하게 데이터를 전송하는 방식이다. (연결형 통신 프로토콜은 TCP(Transmission Control Protocol) 사용)
- **비연결형 통신**은 신뢰성을 보장하지 않지만, 효율적으로 데이터를 전송하는 통신 방식이다. (비연결형 통신 프로토콜은 UDP(User Datagram Protocol) 사용)

#### - TCP의 구조

- 전송 계층에는 **TCP 헤더**가 붙는다. TCP 헤더가 붙은 데이터를 **세그먼트**라고 한다.
- 연결을 하기 위해 TCP 헤더가 있는 **코드 비트**를 사용한다.
- 코드 비트 중 **"SYN"은 연결 요청, "ACK"는 연결 응답, "FIN"은 연결 종료**를 뜻함
- 연결 확립을 위해 패킷 교환을 세 번 하는데 이를 **3-way 핸드셰이크**라고 한다.
- 연결을 확립할 때는 "SYN"과 "ACK"를 사용하고, 연결을 종료할때는 "FIN"과 "ACK"를 사용

- 3-way 핸드셰이크

1. 연결 확립 요청 (SYN) 컴퓨터 1 > 2
2. 연결 확립 응답 + 연결 확인 요청 (ACK + SYN) 컴퓨터 2 > 1
3. 연결 확인 응답 (ACK) 컴퓨터 1 > 2

- FIN과 ACK를 사용한 연결 종료

1. 연결 종료 요청 (FIN) 컴퓨터 1 > 2
2. 연결 종료 응답 (ACK) 컴퓨터 2 > 1
3. 연결 종료 요청 (FIN) 컴퓨터 2 > 1
4. 연결 종료 응답 (ACK) 컴퓨터 1 > 2

#### - 일련번호와 확인 응답 번호의 구조

- 3-way 핸드셰이크 이후 데이터를 전송할때는 TCP 헤더의 **일련번호**와 **확인 응답 번호**가 사용됨
- TCP는 데이터를 **분할**해서 보냄, **일련번호**는 송신 측에서 수신 측에게 '이 데이터가 몇 번째 데이터인지' 알려주는 역할
- **확인 응답 번호**는 수신 측이 몇 번째 데이터를 수신했는지 송신 측에 알려주는 역할
- 데이터를 재전송하는 것을 **재전송 제어**라고 함
- 수신한 세그먼트를 일시적으로 저장하는 곳을 **버퍼**라고 함
- 데이터의 크기가 버퍼 크기를 넘어서면 **오버플로**라고 함
- 버퍼 용량의 크기를 윈도우 크기라고함. (TCP 헤더 부분)
- 수신 측이 윈도우 크기를 가지고 있다면 확인 응답을 받지 않고 **세그먼트(데이터)를 연속으로 전송가능** (더 효율적)

#### - 포트 번호의 구조

- **포트 번호**는 어떤 애플리케이션인지 구분하는 역할을 함
- 포트 번호는 0~65535번을 사용, 0~1023번은 잘 알려진 포트(well-know ports)라고 하고 1025번 이후는 랜덤 포트라고 한다.

#### - UDP의 구조

- **UDP**는 데이터를 **효율적이고 빠르게** 보낼 때 사용되는 **프로토콜**이다.
- UDP 헤더가 있는 데이터를 **UDP 데이터그램**이라고 한다.
- UDP는 랜에서 불특정 다수에게 **브로드캐스트**로 데이터를 일괄 전송한다.

### Day 7. 응용 계층 : 애플리케이션에 데이터 전송하기

#### - 응용 계층의 역할

- 클라이언트에서 사용하는 애플리케이션과 서버에서 사용하는 서버 프로그램 간의 통신은 응용 계층의 프로토콜을 사용
- HTTP(웹), FTP(파일 전송), DNS(이름 해석), SMTP(메일 송신), POP3(메일 수신) 등의 프로토콜이 있음

#### - 웹 서버의 구조 (웹 사이트 접속)

- HTML 은 하이퍼텍스트를 작성하는 마크업 언어로 '태그'를 사용하여 문장 구조나 이미지 파일을 표시
- 일반적으로 웹 브라우저는 웹 서버의 80번 포트를 통해 HTTP 통신을 한다.
- HTTP/1.0 이전의 연결에서는 연결 수립이 되고, 요청과 응답이 오고가면 연결을 끊고 다시 연결 수립하고 요청 응답 과정을 했었어야함.
- 하지만 HTTP/1.1 버전에서는 keepalive 기능이 추가, 데이터를 교환하는 동안에는 연결을 유지하고 데이터 교환이 끝나면 연결을 끊음
- HTTP/2 버전은 요청을 보낸 순서대로 응답을 반환하지 않아도 됨 (요청을 한번에 보내고, 응답을 한번에 막 받아도 됨)

#### - DNS 서버의 구조 (이름 해석)

- DNS 서버는 '이름 해석'을 사용하여 도메인 이름을 IP 주소로 변환
- URL 은 호스트 이름과 도메인 이름으로 분리, www는 호스트 이름, naver.com 은 도메인 이름
- 요청받은 DNS 서버가 해당 도메인 이름의 IP 주소를 모르는 경우에는 다른 DNS 서버에 질의함

#### - 메일 서버의 구조 (SMTP와 POP3)

- 메일 송신은 SMTP (프로토콜) 25번 포트를 사용
- 메일 수신인 POP3 (프로토콜) 110번 포트를 사용
- 메일 서버 간에도 SMTP 를 사용하여 메일을 전송한다.

### Day 8. 네트워크의 전체 흐름 살펴보기

이 부분은 그림을 통해 책으로 이해 및 정리

### Day 9. 무선 랜 이해하기

#### - 무선 랜의 구조

- 무선 랜은 무선 엑세스 포인트와 무선 클라이언트로 구성됨
- 무선 액세스 포인트와 무선 클라이언트가 통신하려면, 무선 랜 칩과 무선 랜 어댑터가 필요함. 최근에 나온 컴퓨터는 대부분 무선 랜 칩 내장
- 무선 랜 어댑터는 USB 메모리 방식과 컴퓨터 카드 방식이 있음
- 무선 랜을 연결하는 방법은 인프라스트럭처 방식(무선 액세스 포인트를 통해 통신)과 애드혹 방식(무선 클라이언트끼리 직접 통신)이 있음
- 무선 랜은 IEEE802.11 규격을 준수하는 기기로 구성
- 무선 랜 규격은 IEEE802.11ad/ac/n/a/g/b 가 있다.
- 무선 액세스 포인트를 무선 공유기 또는 무선 AP 라고도 부른다.

#### - SSID의 구조

- 무선 액세스 포인트와 무선 클라이언트를 연결하려면 SSID 라는 네트워크 이름, 인증, 암호화, 암호화 키를 설정해야함.

무선 액세스 포인트와 무선 클라이언트의 연결 과정
1. 비컨 전송 (무선 액세스 포인트 > 무선 클라이언트)
2. 같은 SSID인지 문의 (무선 클라이언트 > 무선 액세스 포인트)
3. 같은 SSID라고 응답 (무선 액세스 포인트 > 무선 클라이언트)
4. 인증 
5. 접속 요구 (무선 클라이언트 > 무선 액세스 포인트)
6. 승인 응답 (무선 액세스 포인트 > 무선 클라이언트)

- 무선 액세스 포인트는 비컨이라고 하는 자신을 알리는 신호를 네트워크에 있는 모든 기기에 주기적으로 전송.
- 무선 랜에서는 여러 기기를 동시에 연결할 수 있도록 주파수 대역을 분할한다. 그 주파수 대역을 채널이라고 함.
- 무선 액세스 포인트를 여러 대 설치할 때는 전파가 겹치는 부분이 생기지 않도록 채널을 설정할 때 주의해야 함.